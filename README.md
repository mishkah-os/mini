# Brocker - Social Real Estate Network Documentation

> **Vision**: تحويل سوق العقارات من مجرد قوائم صامتة إلى تجربة اجتماعية تفاعلية تشبه الشبكات الاجتماعية الحديثة.

---

## 1. فكرة التطبيق (Concept)

**Broker** هو تطبيق "عقارات اجتماعية" (Social Real Estate) يدمج بين وظائف تطبيقات العقارات التقليدية (بحث، قوائم، فلترة) وبين ميزات الشبكات الاجتماعية (Reels، Stories، Feed).
الهدف هو جعل عملية البحث عن عقار أكثر متعة وتفاعلية، وتمكين الوسطاء (Brokers) من تسويق عقاراتهم بطرق عصرية تعتمد على الفيديو والمحتوى القصير.

### القيمة المضافة (Value Proposition)

- **للباحث عن عقار**: تجربة بصرية غنية (فيديو/ريلز)، سهولة التواصل، واجهة مألوفة تشبه تطبيقات التواصل.
- **للوسيط العقاري**: أدوات تسويق قوية (Stories, Reels)، الوصول لجمهور أوسع، سهولة إضافة المحتوى من الموبايل.

---

## 2. شخصيات المستخدمين (User Personas)

### أ. الوسيط العقاري "كريم" (The Modern Broker)

- **السن**: 28-40 سنة.
- **الهدف**: بيع/تأجير العقارات بسرعة.
- **المشاكل**: التطبيقات التقليدية مملة، صعوبة رفع الفيديوهات، التواصل البطيء.
- **الحل في Brocker**: يرفع "Reel" للعقار في 30 ثانية، يتابع المشاهدات، ويستقبل مكالمات مباشرة.

### ب. الباحث عن سكن "سارة" (The Home Seeker)

- **السن**: 25-35 سنة.
- **الهدف**: إيجاد شقة للإيجار/البيع.
- **المشاكل**: الصور الخادعة، الوصف غير الكافي، صعوبة الوصول للمالك.
- **الحل في Brocker**: تشاهد "فيديو" للعقار لتتأكد من جودته، تتصفح "Stories" المناطق، وتتصل بضغطة زر.

---

## 3. رحلة المستخدم (User Journey)

1. **الدخول (Onboarding)**:
    - المستخدم يفتح التطبيق.
    - يدخل الاسم ورقم الهاتف.
    - يضغط "Fetch Location" لتحديد منطقته تلقائياً.
    - يتحول التطبيق للصفحة الرئيسية بناءً على تفضيلاته.

2. **الاستكشاف (Discovery)**:
    - يتصفح "Home" لرؤية العقارات المميزة.
    - يضغط على "Stories" لمشاهدة عروض سريعة حسب المنطقة.
    - ينتقل لتبويب "Reels" لمشاهدة فيديوهات سريعة للعقارات (Auto-play).

3. **التفاعل (Engagement)**:
    - يعجبه عقار فيضغط عليه.
    - يفتح صفحة التفاصيل (Post Detail).
    - يقرأ الوصف، السعر، ويرى الصور/الفيديو.
    - يضغط "Call Now" للتواصل.

4. **النشر (Creation)** (للوسطاء):
    - يضغط زر `+`.
    - يختار "Listing" (إعلان تقليدي) أو "Reel" (فيديو).
    - يرفع الميديا ويكتب التفاصيل.
    - ينشر الإعلان ليظهر فوراً في الـ Feed.

---

## 4. تفاصيل الشاشات (Screen Analysis)

### 1. Onboarding View

- **الهدف**: تسجيل سريع جداً (Instant Sign-up).
- **المكونات**: حقول إدخال (اسم، هاتف)، زر تحديد موقع جغرافي، زر بدء.
- **UX**: لا يوجد تعقيد (بريد إلكتروني، تفعيل، إلخ). الدخول فوري لتسريع التجربة (Plug & Play).

### 2. Home View

- **Header**: علامة تجارية + تبديل اللغة (AR/EN) والثيم (Dark/Light).
- **Stories Bar**: شريط قصص يعرض فئات (عقارات، مطورين، عروض) بشكل أفقي.
- **Featured Listings**: كروت عقارات مميزة (صورة، سعر، منطقة).
- **Feed**: قائمة لا نهائية من المنشورات الأحدث.

### 3. Reels View

- **الهدف**: استعراض العقارات كفيديو قصير عمودي.
- **الشكل**: شبكة (Grid) تعرض صور مصغرة للريلز. عند الضغط يفتح فيديو بملء الشاشة (في النسخة الكاملة).
- **التفاعل**: يركز على المشاهدة السريعة والإبهار البصري.

### 4. Composer View (وضع الإنشاء)

- **التبديل**: زر لتبديل الوضع بين "Listing" و "Reel".
- **Dynamic Form**: تتغير الحقول بناءً على الوضع المختار.
  - *Listing*: يطلب (عنوان، سعر، نوع، صورة، وصف).
  - *Reel*: يطلب (فيديو، وصف قصير، غلاف).
- **Media**: إمكانية رفع ومراجعة الصور/الفيديو قبل النشر.

### 5. Post Detail View

- **العرض**: صورة/فيديو كبير في الأعلى.
- **المعلومات**: السعر بخط واضح، العنوان، وتفاصيل المنطقة.
- **Call to Action**: زر "Call Now" عائم أو ثابت في الأسفل لسهولة الوصول.

---

## 5. التوثيق التقني (Technical Documentation)

### البنية التحتية (Seeds & Schema)

التطبيق مبني بنمط **Schema-First**، حيث يقود ملف `brocker_schema_v2.json` كل منطق التطبيق.

- **الجداول الأساسية**:
  - `users`: المستخدمين (Borkers/Seekers).
  - `listings`: العقارات الأساسية (السعر، النوع، الموقع).
  - `media_assets`: جدول مركزي للصور والفيديوهات.
  - `posts`: منشورات التايم لاين.
  - `reels`: فيديوهات قصيرة.
  - `user_locations`: لتخزين أحدث موقع للمستخدم.

- **العلاقات**: كل `listing` يملكه `owner_id` (User) ويمكن أن يحتوي على `media_id`.

### التقنيات المستخدمة (Stack)

1. **Mishkah DSL**: مكتبة بناء واجهات خفيفة (بديل React/Vue) تعتمد على JavaScript خالص.
2. **Mishkah Store**: إدارة حالة التطبيق (State Management) والاتصال بقاعدة البيانات عبر WebSocket.
3. **Mobile Kit**: مكتبة UI خاصة توفر مكونات الموبايل (BottomSheet, SnackBar, PullToRefresh).
4. **PWA Auto**: نظام تحويل التطبيق لـ Progressive Web App تلقائياً (Offline support, Installable).

### PWA & Offline

- التطبيق يستخدم `mishkah.pwa.js` لإنشاء `manifest.json` و `service-worker.js` تلقائياً.
- يتم تخزين البيانات (Listings/Reels) في `localStorage` أو `IndexedDB` لتعمل بدون إنترنت (Mock Mode / Caching).

---

## 6. التصميم (Design System)

### الفلسفة (Dark & Premium)

- **الألوان**: يعتمد الوضع الليلي (Dark Mode) كأساس، باستخدام درجات الأزرق الليلي (`#0b0f1a`) ليعطي إحساساً بالفخامة والراحة للعين.
- **الخطوط**: يستخدم خط `Cairo` لدعم اللغة العربية بشكل عصري ومقروء.

### مكونات الموبايل (Native Feel)

- **Bottom Navigation**: للتنقل السهل بإبهام اليد الواحدة.
- **Touch Targets**: أزرار كبيرة (44px+) وسهلة الضغط.
- **Feedback**: اهتزازات خفيفة (Haptic) عند التفاعل (مثل عمل Like أو تحديث الصفحة).
- **Transitions**: حركات انسيابية عند فتح القوائم (Slide Up) أو التنقل بين الصفحات.

### اللغة (Localization)

- يدعم **RTL** (من اليمين لليسار) بشكل كامل للعربية.
- التبديل الفوري بين العربية والإنجليزية دون إعادة تحميل الصفحة.

---

**الإصدار**: 2.0 (Mobile Kit Enhanced)
**تاريخ التوثيق**: 2026-02-03
